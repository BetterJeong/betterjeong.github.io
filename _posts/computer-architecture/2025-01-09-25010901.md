---
title: "[Mano의 컴퓨터시스템구조] 레지스터 전송과 마이크로 연산"
excerpt: "레지스터 전송, 버스, 메모리 전송"

categories:
  - Computer Architecture

toc: false
toc_sticky: false

date: 2025-01-09
last_modified_at: 2025-01-20
---

> 컴퓨터 구조 스터디를 하며 'Mano의 컴퓨터시스템구조 제3판' 교재를 정리한 글입니다.

# 레지스터 전송과 마이크로 연산

## 레지스터 전송 언어

### 마이크로 연산(micro-operation)

하나의 클럭 펄스 동안 실행되는 기본 동작이다.  

- 시프트(shift)  
- 카운트(count)
- 클리어(clear)  
- 로드(load)  

### 레지스터 전송 언어(register transfer language)

레지스터 간 마이크로 연산 전송을 간단하고 명료하게 표시하기 위해 사용하는 기호이다.  

## 레지스터 전송  

MAR: 메모리 주소 레지스터 (memory address register)  
PC: 프로그램 카운터 (program counter)  
IR: 명령어 레지스터 (instruction register)  
R1: 프로세서 레지스터 (processor register)  

![block](/assets/images/25010901/block.png)  

사각형 안에 이름을 적어 레지스터를 나타낸다.  
$n$ 비트 레지스터의 각 플립플롭들은 맨 오른쪽을 0으로 하고 $n-1$까지 번호가 매겨진다.  
PC의 경우 두 파트로 나눠진 16비트 레지스터로 0-7은 하위 바이트($L$), 8-15는 상위 바이트($H$)이다.  

$$
R2 \leftarrow R1
$$

$\leftarrow$: 치환 연산자, 레지스터들 사이의 정보 전송을 나타냄

$$
If(P = 1) \quad then (R2 \leftarrow R1)
$$

$$
= P: R2 \leftarrow R1
$$

$if-then$ 문장: 레지스터 전송이 정해진 제어 조건일 때만 발생하도록 함  
제어 함수: 0 또는 1을 가지며, $P=1$일 때 전송 수행  

![42](/assets/images/25010901/42.png)  

`(a)` 에서 $R1$의 $n$비트 레지스터 출력이 $R2$의 입력으로 연결되어 있다.  
`Load` 신호가 상승하면 다음 클록 펄스가 상승할 때 데이터 전송이 이루어진다.  
$P$ 는 시간 $t$ 에 활성화되며, 매 클럭 변이에서 전송이 일어나는 것을 막기 위해 $t+1$에 0으로 돌아간다.  

### 레지스터 전송에 사용되는 기본 기호  

| **Symbol**                | **Description**                     | **Examples**            |
|---------------------------|-------------------------------------|-------------------------|
| Letters (and numerals)    | Denotes a register                  | MAR, R2                 |
| Parentheses ( )           | Denotes a part of a register        | R2(0–7), R2(L)          |
| Arrow ←                   | Denotes transfer of information     | R2 ← R1                 |
| Comma ,                   | Separates two microoperations       | R2 ← R1, R1 ← R2        |

레지스터: 영어 대문자, 숫자로 표현 ex) MAR, R2  
레지스터 일부: 괄호()를 사용해 비트 범위, 부분 혹은 레이블 표시 ex) (0-7), (L)  

화살표: 전송 방향  
쉼표: 동시에 일어나는 동작  

## 버스와 메모리 전송

각 레지스터가 독립된 라인을 사용하게 되면 숫자가 너무 많아지므로, 버스(bus) 시스템을 공통으로 사용한다.  
버스는 한 번에 하나의 전송이 이루어지도록 사용할 레지스터를 선택한다.  

![bus](/assets/images/25010901/bus.png)  

멀티플렉서를 이용하여 공통 버스를 구성할 수 있다.  
0-3 네 개의 비트를 가진 각 레지스터에서 동일한 위치의 비트가 하나의 멀티플렉서에 연결된다.  

![table](/assets/images/25010901/table.png)  

$S_1S_0=00$ 일 때, 각 레지스터의 0번 비트를 선택하므로 레지스터 A가 선택된다.  
01, 10, 11일 때는 각각 1번, 2번, 3번 비트를 선택하게 된다.  

$n$비트의 $k$ 레지스터를 멀티플렉스하는 버스 시스템에서는 $n$개의 $k \times 1$ 멀티플렉서가 필요하다.  
위는 4비트의 4개 레지스터에 대한 버스 시스템이므로 4개의 $4 \times 1$ 멀티플렉서가 사용됐다.  
16비트의 8개 레지스터에 대한 버스는 16개의 $8 \times 1$ 멀티플렉서와 3개의 선택 입력이 필요하다.  

$$
BUS \leftarrow C, \quad R1 \leftarrow BUS
$$

$$
= R1 \leftarrow C
$$

레지스터 전송문에 버스를 포함하여 표현했다.  
버스가 시스템에 존재한다는 가정 하에 생략할 수 있다.  

### 3-상태 버스 버퍼

멀티플렉서 대신 3-상태 게이트를 사용하여 구성한 버스 시스템이다.  
3가지 상태는 각각 논리 0, 1과 고저항 상태(high-impedance state)이다.   

고저항 상태: 개회로와 마찬가지로 출력이 차단되어 아무 논리값도 가지지 않음  

![state](/assets/images/25010901/state.png)  

디코더의 인에이블 입력이 0이면 모든 버스 라인이 고저항 상태가 된다.  
반면 인에이블 입력이 1일 경우 디코더 입력값에 따라 하나의 버퍼만 활성화된다.  
제어 입력이 1일 경우 출력이 입력과 동일한 값을 가지고, 0일 때는 고저항 상태이다.  

### 메모리 전송

메모리에서 정보를 가져올 때는 읽기(read) 동작이라 하고, 정보를 저장할 때는 쓰기(write) 동작이라고 한다.  
메모리 워드는 $M$으로 나타낸다.  

$$
Read: DR \leftarrow M[AR]
$$

메모리를 주소 레지스터(Address register, AR)로부터 받아 데이터 레지스터(data register, DR)에 전송하는 읽기 동작을 나타낸 기호이다.  

$$
Wirte: M[AR] \leftarrow R1
$$

레지스터 R1에 있는 데이터를 $AR$에 지정된 메모리 주소에 전송하는 쓰기 동작을 나타낸 기호이다.  

